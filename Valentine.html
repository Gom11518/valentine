<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>I Love You - 3D Valentine</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Parisienne&family=Sarabun:wght@300;600&display=swap');
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body { 
      overflow: hidden; 
      background: #050205; 
      color: #ffccff; 
      font-family: 'Sarabun', sans-serif; 
    }

    canvas { position: fixed; top: 0; left: 0; outline: none; }

    .content-overlay {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 10;
    }

    h1 {
      position: absolute;
      top: 5%;
      width: 100%;
      text-align: center;
      font-family: 'Parisienne', cursive;
      font-size: clamp(2rem, 6vw, 4rem);
      text-shadow: 0 0 20px rgba(255, 102, 204, 0.9);
      animation: glow 2s ease-in-out infinite alternate;
      margin: 0;
    }

    /* --- ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡∏°‡πà: ‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏∏‡∏°‡∏ã‡πâ‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏á --- */
    .message-container {
      position: absolute;
      bottom: 40px; /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á */
      left: 30px;   /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ */
      text-align: left;
      z-index: 20;
      /* ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏£‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏•‡πâ‡∏ß */
    }

    /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ */
    .message p {
      position: absolute; /* ‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡πâ‡∏≠‡∏ô‡∏ó‡∏±‡∏ö‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏î‡∏¥‡∏° */
      bottom: 0;
      left: 0;
      width: 350px; /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏Å‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÅ‡∏õ‡∏•‡∏Å‡πÜ */
      margin: 0;
      font-size: 1.3rem; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ */
      font-weight: 600;
      color: #fff0f5;
      text-shadow: 0 2px 5px rgba(0,0,0,0.7);
      
      opacity: 0; /* ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô */
      transform: translateY(20px); /* ‡∏î‡∏±‡∏ô‡∏•‡∏á‡πÑ‡∏õ‡∏Ç‡πâ‡∏≤‡∏á‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢ */
      transition: all 1s ease-in-out; /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏Å‡∏≤‡∏£‡∏Ñ‡πà‡∏≠‡∏¢‡πÜ ‡∏õ‡∏£‡∏≤‡∏Å‡∏è */
    }

    /* ‡∏Ñ‡∏•‡∏≤‡∏™‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• */
    .message p.active {
      opacity: 1; /* ‡πÅ‡∏™‡∏î‡∏á */
      transform: translateY(0); /* ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏Å‡∏ï‡∏¥ */
    }

    @keyframes glow { 
      from { text-shadow: 0 0 15px rgba(255, 102, 204, 0.8); } 
      to { text-shadow: 0 0 25px rgba(255, 102, 204, 1), 0 0 5px #fff; } 
    }
  </style>
</head>
<body>

  <canvas class="webgl"></canvas>

  <div class="content-overlay">
    <h1>I Love You</h1>
    
    <div class="message-container message">
      <p class="active">‡∏£‡∏±‡∏Å‡πÄ‡∏ò‡∏≠‡∏ô‡∏∞‡∏à‡∏∏‡πä‡∏ö‡πÜü©∑üê∞üêª</p>
      <p>‡∏≠‡∏¢‡∏≤‡∏Å‡∏Å‡∏≠‡∏î‡∏à‡∏±‡∏á‡∏á</p>
      <p>‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡πâ‡∏≤</p>
      <p>‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡∏¢</p>
      <p>‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÇ‡∏•‡∏Å‡πÅ‡∏•‡πâ‡∏ß</p>
      <p>‡∏¢‡∏¥‡πâ‡∏°‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ‡∏ô‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å</p>
      <p>‡∏°‡∏≤‡∏≠‡πâ‡∏≠‡∏ô‡∏´‡∏ô‡πà‡∏≠‡∏¢</p>
      <p>‡∏á‡πâ‡∏≥‡πÜ</p>
      <p>‡∏£‡∏±‡∏Å‡πÜ‡πÜ‡πÜ</p>
      <p>‡∏Å‡∏¥‡∏ô‡πÄ‡∏Ñ‡πâ‡∏≤‡∏≤‡∏≤</p>
      <p>‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÉ‡∏à‡∏ï‡∏•‡∏≠‡∏î</p>
    </div>
  </div>

  <script type="module">
    import * as THREE from 'https://cdn.skypack.dev/three@0.135.0';
    import { GLTFLoader } from 'https://cdn.skypack.dev/three@0.135.0/examples/jsm/loaders/GLTFLoader';

    // --- ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ---
    function cycleMessages() {
      const messages = document.querySelectorAll('.message p');
      let currentIndex = 0;

      setInterval(() => {
        // 1. ‡∏ã‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
        messages[currentIndex].classList.remove('active');

        // 2. ‡∏Ç‡∏¢‡∏±‡∏ö‡πÑ‡∏õ‡∏≠‡∏¥‡∏ô‡πÄ‡∏î‡πá‡∏Å‡∏ã‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (‡∏ñ‡πâ‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤ 0)
        currentIndex = (currentIndex + 1) % messages.length;

        // 3. ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
        messages[currentIndex].classList.add('active');
      }, 3000); // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏∏‡∏Å‡πÜ 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ)
    }
    
    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    cycleMessages();


    // --- ‡∏™‡πà‡∏ß‡∏ô 3D Three.js (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) ---
    class ValentineWorld {
      constructor() {
        this.canvas = document.querySelector('.webgl');
        this.scene = new THREE.Scene();
        this.textureLoader = new THREE.TextureLoader();
        this.clock = new THREE.Clock();
        
        this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        this.camera.position.z = 5;
        
        this.renderer = new THREE.WebGLRenderer({ canvas: this.canvas, antialias: true });
        this.renderer.setSize(window.innerWidth, window.innerHeight);
        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

        this.photoGroup = new THREE.Group();
        this.scene.add(this.photoGroup);

        this.init();
      }

      async init() {
        this.addMovingStars();
        this.addPhotoRing();
        await this.loadMainHeart(); 
        this.animate();
        window.addEventListener('resize', () => this.onResize());
      }

      addMovingStars() {
        const geo = new THREE.BufferGeometry();
        const count = 4000;
        const pos = new Float32Array(count * 3);
        const velocities = new Float32Array(count);
        for(let i=0; i<count*3; i++) pos[i] = (Math.random() - 0.5) * 25;
        for(let i=0; i<count; i++) velocities[i] = Math.random() * 0.03 + 0.01;
        geo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
        this.starVelocities = velocities;
        this.starGeo = geo;
        const mat = new THREE.PointsMaterial({ size: 0.03, color: 0xffccff, transparent: true, opacity: 0.8, blending: THREE.AdditiveBlending });
        this.stars = new THREE.Points(geo, mat);
        this.scene.add(this.stars);
      }

      addPhotoRing() {
        const photos = ['Tong1.jpg', 'Tong2.jpg', 'Tong3.jpg', 'Tong4.jpg', 'Tong5.jpg', 'Tong6.jpg', 'Tong7.jpg', 'Tong8.jpg', 'Tong9.jpg', 'Tong10.jpg', 'Tong11.jpg'];
        const radius = 3.2;
        photos.forEach((url, i) => {
          this.textureLoader.load(url, (tex) => {
            const mat = new THREE.MeshBasicMaterial({ map: tex, side: THREE.DoubleSide });
            const mesh = new THREE.Mesh(new THREE.PlaneGeometry(0.9, 0.9), mat);
            const angle = (i / photos.length) * Math.PI * 2;
            mesh.position.set(Math.cos(angle) * radius, 0, Math.sin(angle) * radius);
            mesh.lookAt(0, 0, 0);
            mesh.rotateY(Math.PI); 
            this.photoGroup.add(mesh);
          });
        });
      }

      async loadMainHeart() {
        const loader = new GLTFLoader();
        loader.load('https://assets.codepen.io/74321/heart.glb', (gltf) => {
          this.heart = gltf.scene;
          this.heart.scale.set(0.5, 0.5, 0.5);
          this.heart.traverse(n => { if(n.isMesh) n.material = new THREE.MeshBasicMaterial({ color: 0xff3366, wireframe: true }); });
          this.scene.add(this.heart);
        });
      }

      animate() {
        const elapsed = this.clock.getElapsedTime();
        const positions = this.starGeo.attributes.position.array;
        for(let i=0; i<this.starVelocities.length; i++) {
            positions[i*3 + 2] += this.starVelocities[i];
            if(positions[i*3 + 2] > 5) positions[i*3 + 2] = -15;
        }
        this.starGeo.attributes.position.needsUpdate = true;
        if(this.photoGroup) this.photoGroup.rotation.y = elapsed * 0.15;
        if(this.heart) { this.heart.rotation.y = elapsed * 0.5; this.heart.scale.setScalar(0.5 + Math.sin(elapsed * 2) * 0.03); }
        this.renderer.render(this.scene, this.camera);
        requestAnimationFrame(() => this.animate());
      }

      onResize() {
        this.camera.aspect = window.innerWidth / window.innerHeight;
        this.camera.updateProjectionMatrix();
        this.renderer.setSize(window.innerWidth, window.innerHeight);
      }
    }
    new ValentineWorld();
  </script>
</body>
</html>
