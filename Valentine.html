<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>I Love You - 3D Valentine</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Parisienne&family=Sarabun:wght@300;600&display=swap');
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body { 
      overflow: hidden; 
      background: #050205; 
      color: #ffccff; 
      font-family: 'Sarabun', sans-serif; 
    }

    canvas { position: fixed; top: 0; left: 0; outline: none; }

    /* ‡∏õ‡∏£‡∏±‡∏ö Layout ‡πÉ‡∏´‡πâ‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô */
    .content-overlay {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none; /* ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏∞‡∏•‡∏∏‡πÑ‡∏õ‡∏´‡∏°‡∏∏‡∏ô‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÑ‡∏î‡πâ */
      z-index: 10;
    }

    /* 1. ‡∏õ‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ I Love You ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á‡πÅ‡∏•‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏™‡∏∏‡∏î */
    h1 {
      position: absolute;
      top: 5%; /* ‡∏Ç‡∏¢‡∏±‡∏ö‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô */
      width: 100%;
      text-align: center;
      font-family: 'Parisienne', cursive;
      font-size: clamp(2rem, 6vw, 4rem); /* ‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î */
      text-shadow: 0 0 20px rgba(255, 102, 204, 0.9);
      animation: glow 2s ease-in-out infinite alternate;
      margin: 0;
    }

    /* 2. ‡∏¢‡πâ‡∏≤‡∏¢‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏≤‡∏ó‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢ + ‡∏ó‡∏≥‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô */
    .dedication-container {
      position: absolute;
      left: 5%;  /* ‡∏ä‡∏¥‡∏î‡∏ã‡πâ‡∏≤‡∏¢ */
      top: 50%;
      transform: translateY(-50%); /* ‡∏à‡∏±‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
      width: 280px;
      height: 160px; /* ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
      
      background: rgba(255, 192, 203, 0.15);
      border-radius: 20px;
      border: 1px solid rgba(255, 192, 203, 0.4);
      backdrop-filter: blur(8px);
      box-shadow: 0 0 30px rgba(255, 105, 180, 0.2);
      
      overflow: hidden; /* ‡∏ã‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏•‡πâ‡∏ô‡∏Å‡∏£‡∏≠‡∏ö */
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    /* ‡∏ï‡∏±‡∏ß‡∏´‡πà‡∏≠‡∏´‡∏∏‡πâ‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô */
    .scrolling-content {
      /* ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡πà‡∏ô: 11 ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ + ‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á */
      animation: scrollUp 15s linear infinite; 
    }

    .scrolling-content p {
      font-size: 1.1rem;
      font-weight: 600;
      color: #fff0f5;
      margin: 15px 0; /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ */
      text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    }

    /* ‡∏Ñ‡∏µ‡∏¢‡πå‡πÄ‡∏ü‡∏£‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏∂‡πâ‡∏ô */
    @keyframes scrollUp {
      0% { transform: translateY(100%); } /* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≤‡∏á‡∏•‡πà‡∏≤‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á */
      100% { transform: translateY(-120%); } /* ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡∏à‡∏ô‡∏û‡πâ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á */
    }

    @keyframes glow { 
      from { text-shadow: 0 0 15px rgba(255, 102, 204, 0.8); } 
      to { text-shadow: 0 0 25px rgba(255, 102, 204, 1), 0 0 5px #fff; } 
    }
  </style>
</head>
<body>

  <canvas class="webgl"></canvas>

  <div class="content-overlay">
    <h1>I Love You</h1>
    
    <div class="dedication-container">
      <div class="scrolling-content">
        <p>‡∏£‡∏±‡∏Å‡πÄ‡∏ò‡∏≠‡∏ô‡∏∞‡∏à‡∏∏‡πä‡∏ö‡πÜü©∑üê∞üêª</p>
        <p>‡∏≠‡∏¢‡∏≤‡∏Å‡∏Å‡∏≠‡∏î‡∏à‡∏±‡∏á‡∏á</p>
        <p>‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡πâ‡∏≤</p>
        <p>‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡∏¢</p>
        <p>‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÇ‡∏•‡∏Å‡πÅ‡∏•‡πâ‡∏ß</p>
        <p>‡∏¢‡∏¥‡πâ‡∏°‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ‡∏ô‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å</p>
        <p>‡∏°‡∏≤‡∏≠‡πâ‡∏≠‡∏ô‡∏´‡∏ô‡πà‡∏≠‡∏¢</p>
        <p>‡∏á‡πâ‡∏≥‡πÜ</p>
        <p>‡∏£‡∏±‡∏Å‡πÜ‡πÜ‡πÜ</p>
        <p>‡∏Å‡∏¥‡∏ô‡πÄ‡∏Ñ‡πâ‡∏≤‡∏≤‡∏≤</p>
        <p>‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÉ‡∏à‡∏ï‡∏•‡∏≠‡∏î</p>
        <p>‡∏£‡∏±‡∏Å‡πÄ‡∏ò‡∏≠‡∏ô‡∏∞‡∏à‡∏∏‡πä‡∏ö‡πÜü©∑üê∞üêª</p>
      </div>
    </div>
  </div>

  <script type="module">
    import * as THREE from 'https://cdn.skypack.dev/three@0.135.0';
    import { GLTFLoader } from 'https://cdn.skypack.dev/three@0.135.0/examples/jsm/loaders/GLTFLoader';

    class ValentineWorld {
      constructor() {
        this.canvas = document.querySelector('.webgl');
        this.scene = new THREE.Scene();
        this.textureLoader = new THREE.TextureLoader();
        this.clock = new THREE.Clock();
        
        this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        this.camera.position.z = 5;
        
        this.renderer = new THREE.WebGLRenderer({ canvas: this.canvas, antialias: true });
        this.renderer.setSize(window.innerWidth, window.innerHeight);
        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

        this.photoGroup = new THREE.Group();
        this.scene.add(this.photoGroup);

        this.init();
      }

      async init() {
        this.addMovingStars();
        this.addPhotoRing();
        await this.loadMainHeart(); 
        this.animate();
        
        window.addEventListener('resize', () => this.onResize());
      }

      addMovingStars() {
        const geo = new THREE.BufferGeometry();
        const count = 4000;
        const pos = new Float32Array(count * 3);
        const velocities = new Float32Array(count);

        for(let i=0; i<count*3; i++) {
          pos[i] = (Math.random() - 0.5) * 25;
        }
        for(let i=0; i<count; i++) {
          velocities[i] = Math.random() * 0.03 + 0.01;
        }

        geo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
        this.starVelocities = velocities;
        this.starGeo = geo;

        const mat = new THREE.PointsMaterial({ 
          size: 0.03, 
          color: 0xffccff, 
          transparent: true, 
          opacity: 0.8,
          blending: THREE.AdditiveBlending 
        });
        
        this.stars = new THREE.Points(geo, mat);
        this.scene.add(this.stars);
      }

      addPhotoRing() {
        // ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (Tong1 - Tong11)
        const photos = [
          'Tong1.jpg', 'Tong2.jpg', 'Tong3.jpg', 'Tong4.jpg', 
          'Tong5.jpg', 'Tong6.jpg', 'Tong7.jpg', 'Tong8.jpg', 
          'Tong9.jpg', 'Tong10.jpg', 'Tong11.jpg'
        ];
        
        const radius = 3.2;
        photos.forEach((url, i) => {
          this.textureLoader.load(url, (tex) => {
            const mat = new THREE.MeshBasicMaterial({ map: tex, side: THREE.DoubleSide });
            const mesh = new THREE.Mesh(new THREE.PlaneGeometry(0.9, 0.9), mat);
            
            const angle = (i / photos.length) * Math.PI * 2;
            mesh.position.set(Math.cos(angle) * radius, 0, Math.sin(angle) * radius);
            mesh.lookAt(0, 0, 0);
            mesh.rotateY(Math.PI); // ‡πÅ‡∏Å‡πâ‡∏£‡∏π‡∏õ‡∏Å‡∏•‡∏±‡∏ö‡∏î‡πâ‡∏≤‡∏ô
            
            this.photoGroup.add(mesh);
          }, undefined, (err) => { console.error("Error loading:", url); });
        });
      }

      async loadMainHeart() {
        const loader = new GLTFLoader();
        loader.load('https://assets.codepen.io/74321/heart.glb', (gltf) => {
          this.heart = gltf.scene;
          this.heart.scale.set(0.5, 0.5, 0.5); // ‡∏Ç‡∏ô‡∏≤‡∏î‡∏´‡∏±‡∏ß‡πÉ‡∏à
          this.heart.traverse(n => {
            if(n.isMesh) n.material = new THREE.MeshBasicMaterial({ color: 0xff3366, wireframe: true });
          });
          this.scene.add(this.heart);
        });
      }

      animate() {
        const elapsed = this.clock.getElapsedTime();
        
        // ‡∏Ç‡∏¢‡∏±‡∏ö‡∏î‡∏≤‡∏ß
        const positions = this.starGeo.attributes.position.array;
        for(let i=0; i<this.starVelocities.length; i++) {
            positions[i*3 + 2] += this.starVelocities[i];
            if(positions[i*3 + 2] > 5) positions[i*3 + 2] = -15;
        }
        this.starGeo.attributes.position.needsUpdate = true;

        if(this.photoGroup) this.photoGroup.rotation.y = elapsed * 0.15;
        if(this.heart) {
          this.heart.rotation.y = elapsed * 0.5;
          this.heart.scale.setScalar(0.5 + Math.sin(elapsed * 2) * 0.03);
        }

        this.renderer.render(this.scene, this.camera);
        requestAnimationFrame(() => this.animate());
      }

      onResize() {
        this.camera.aspect = window.innerWidth / window.innerHeight;
        this.camera.updateProjectionMatrix();
        this.renderer.setSize(window.innerWidth, window.innerHeight);
      }
    }

    new ValentineWorld();
  </script>
</body>
</html>
